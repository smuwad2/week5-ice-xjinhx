<!DOCTYPE html>
<html>
    <head>

        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        
         <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    </head>
    <body>
        <div class="bg-light text-center p-5 mb-4">
            <h2>Choose an option:</h2>
            <label for="limit">Limit:</label>
            <input id="limit" type="number" min=1 max=5 value=1>
            <select onchange="getData()" id="type">
                <option value="customers">Customers</option>
                <option value="products">Products</option>
                <option value="suppliers">Suppliers</option>
            </select>
            
        </div>
        <div id="result">

        </div>
        <script>
            function getData() {
                const type = document.getElementById("type").value;
                const limitval = document.getElementById("limit").value;
                let url = "/data?type=" + type + "&limit=" + limitval;
            
                axios.get(url)
                .then(response=>{
                    generateTable(response.data, type);
                })
                .catch(error => console.error(error));
            }

            function generateTable(dataObj, type) {
                const h2Element = document.querySelector("#result h2");
                h2Element.innerText = type;
                
                const limitval = document.getElementById("limit").value;
                let records = dataObj.records;
                let keys = Object.keys(records[0]);
                
                const thead = document.querySelector("#result thead");
                let headerHTML = "<tr>";
                keys.forEach(key => {
                    headerHTML += "<th>" + key + "</th>";
                });
                headerHTML += "</tr>";
                thead.innerHTML = headerHTML;
                
                const tbody = document.querySelector("#result tbody");
                let bodyHTML = "";
                for (let i = 0; i < limitval && i < records.length; i++){
                    bodyHTML += "<tr>";
                    keys.forEach(key=>{
                        bodyHTML += "<td>" + records[i][key] + "</td>";
                    })
                    bodyHTML += "</tr>";
                }
                tbody.innerHTML = bodyHTML;
            }
        </script>
</body>
</html>